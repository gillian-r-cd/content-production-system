# UI核心问题修复计划

## 一、问题分析（第一性原理）

### 前端的核心目的
```
前端 = 让用户能够：
  1. 开始一个项目 → 需要"新建项目"入口
  2. 看到AI生成的内容 → 需要展示完整内容
  3. 编辑/选择方案 → 需要可交互的编辑区
  4. 逐步推进工作流 → 需要明确的阶段切换
```

### 当前的致命问题

| 问题 | 严重程度 | 描述 |
|------|---------|------|
| 无新建项目入口 | P0 | 用户无法开始，设置页面说"请先开始项目"但无处可开始 |
| 方案卡片无内容 | P0 | 只显示"方案1"标题，无法看到方案详情 |
| 方案无法选择 | P0 | 没有[查看详情]和[选择]按钮 |
| 编辑区不可编辑 | P0 | 内容只读，无法修改 |
| 阶段切换混乱 | P1 | 点击左侧进度栏无响应 |

---

## 二、修复策略

### Phase 1: 新建项目流程

**目标**：用户能从零开始创建项目

**入口位置**：
1. 欢迎页面（无项目时自动显示）
2. 左侧进度栏顶部（有项目时点击"+"）

**流程**：
```
1. 点击"新建项目"
2. 选择创作者特质（必选）
3. 输入项目名称（可选，可自动生成）
4. 在对话框输入内容描述
5. AI开始意图分析
```

**Benchmark**：
- [ ] 首次进入显示欢迎页
- [ ] 选择Profile后能开始输入
- [ ] 输入描述后能触发AI分析

---

### Phase 2: 方案卡片重做

**目标**：方案卡片展示完整内容，可查看/选择

**设计**：
```
┌──────────────────────────────────┐
│    方案 A (稳妥型)               │
├──────────────────────────────────┤
│ 整体思路：                       │
│ 从痛点切入，用数据说服，          │
│ 强调实战案例...                  │
│                                  │
│ 核心策略：                       │
│ • 先展示问题的严重性             │
│ • 用成功案例建立信任             │
│ • 提供明确的解决路径             │
├──────────────────────────────────┤
│ [展开详情]         [✓ 选择此方案] │
└──────────────────────────────────┘
```

**交互**：
- 点击卡片高亮
- 点击"展开详情"显示完整内容
- 点击"选择此方案"确认并进入下一步
- 双击卡片直接选择

**Benchmark**：
- [ ] 方案显示完整的思路描述
- [ ] 点击能查看详情
- [ ] 选择后进入内容生产

---

### Phase 3: 编辑区可编辑

**目标**：用户能直接编辑AI生成的内容

**设计**：
```
┌─────────────────────────────────────────────┐
│ 意图分析                        [重新分析]  │
├─────────────────────────────────────────────┤
│                                             │
│ 目标                              [✏️编辑]  │
│ ┌─────────────────────────────────────────┐│
│ │让目标用户看完介绍页后立即报名课程        ││
│ └─────────────────────────────────────────┘│
│                                             │
│ 成功标准                                    │
│ ┌─────────────────────────────────────────┐│
│ │ • 转化率 > 5%                           ││
│ │ • 用户停留时间 > 3分钟                   ││
│ │ [+ 添加]                                ││
│ └─────────────────────────────────────────┘│
│                                             │
│              [确认并进入下一步]              │
└─────────────────────────────────────────────┘
```

**关键点**：
- 每个字段都可以点击编辑
- 列表类型支持添加/删除
- 有明确的"确认"按钮进入下一步

**Benchmark**：
- [ ] 点击字段可编辑
- [ ] 编辑后自动保存
- [ ] 确认按钮触发下一阶段

---

### Phase 4: 阶段切换完善

**目标**：点击左侧进度栏能切换阶段

**实现**：
- 点击已完成阶段：加载该阶段内容（只读或可编辑）
- 点击当前阶段：刷新显示
- 点击未来阶段：显示"请先完成前置阶段"

**Benchmark**：
- [ ] 点击进度栏响应
- [ ] 显示正确的阶段内容
- [ ] 状态栏显示正确

---

## 三、文件修改清单

```
web/src/components/
├── layout/
│   ├── MainLayout.tsx         - 添加新建项目入口
│   ├── ProgressPanel.tsx      - 点击阶段响应
│   └── EditorPanel.tsx        - 路由到正确的阶段组件
│
├── stages/
│   ├── WelcomeView.tsx        - 重写：新建项目引导
│   ├── IntentStage.tsx        - 重写：可编辑意图
│   ├── CoreDesignStage.tsx    - 重写：方案卡片完整展示
│   ├── CoreProductionStage.tsx- 新增：逐字段生产
│   └── ExtensionStage.tsx     - 新增：外延生产
│
└── common/
    ├── EditableField.tsx      - 新增：可编辑字段组件
    └── SchemeCard.tsx         - 新增：方案卡片组件
```

---

## 四、测试计划

### 单元测试
- EditableField：编辑/保存/取消
- SchemeCard：展开/收起/选择

### 集成测试
- 新建项目 → 意图分析 → 方案选择 → 内容生产
- 点击进度栏 → 切换阶段 → 显示正确内容

### E2E测试
- 完整工作流：从新建到外延生产

---

## 五、优先级

1. **Phase 1**: 新建项目（否则无法开始）
2. **Phase 2**: 方案卡片（当前阶段卡在这里）
3. **Phase 3**: 编辑区可编辑（核心交互）
4. **Phase 4**: 阶段切换（用户体验）




