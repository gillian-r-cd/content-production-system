# UI设计规范
# 功能：定义系统的界面布局、交互模式、组件规范
# 核心：三栏布局，左侧进度、中间编辑、右侧对话

---

## 一、整体布局

### 1.1 三栏结构

```
┌─────────────────────────────────────────────────────────────────────┐
│                            顶部导航栏                                │
│  [项目名称]              [CreatorProfile选择]        [设置] [帮助]   │
├────────────┬─────────────────────────────────┬─────────────────────┤
│            │                                 │                     │
│   进度栏    │           编辑区                │      对话区         │
│  (左侧)    │          (中间)                 │     (右侧)          │
│            │                                 │                     │
│  ┌──────┐  │  ┌─────────────────────────┐   │  ┌───────────────┐  │
│  │阶段1 │  │  │                         │   │  │ AI对话窗口    │  │
│  │ ✓    │  │  │   当前阶段的内容展示     │   │  │               │  │
│  ├──────┤  │  │   和编辑区域             │   │  │ 用户: ...     │  │
│  │阶段2 │  │  │                         │   │  │ AI: ...       │  │
│  │ →    │  │  │                         │   │  │               │  │
│  ├──────┤  │  │                         │   │  │               │  │
│  │阶段3 │  │  │                         │   │  │               │  │
│  │ ○    │  │  │                         │   │  ├───────────────┤  │
│  ├──────┤  │  │                         │   │  │ [输入框]  [发]│  │
│  │...   │  │  └─────────────────────────┘   │  └───────────────┘  │
│  └──────┘  │                                 │                     │
│            │                                 │                     │
├────────────┴─────────────────────────────────┴─────────────────────┤
│                            状态栏                                   │
│  [当前阶段: 内涵设计]  [Simulator: 自动]  [迭代: 2/3]               │
└─────────────────────────────────────────────────────────────────────┘
```

### 1.2 栏位宽度

```yaml
左侧进度栏:
  默认宽度: 200px
  最小宽度: 150px
  最大宽度: 300px
  可折叠: 是

中间编辑区:
  宽度: 自适应（填充剩余空间）
  最小宽度: 400px

右侧对话区:
  默认宽度: 350px
  最小宽度: 280px
  最大宽度: 500px
  可折叠: 是
```

---

## 二、左侧进度栏

### 2.1 功能定位

```yaml
核心职责:
  - 展示项目完整流程
  - 标记当前所在阶段
  - 显示各阶段状态（待处理/进行中/完成/阻塞）
  - 支持快速跳转到任意阶段
```

### 2.2 阶段状态

```yaml
状态类型:
  pending:     # 待处理（灰色圆圈 ○）
    图标: ○
    颜色: #999
    可点击: 否（需要按顺序）
  
  in_progress: # 进行中（蓝色箭头 →）
    图标: →
    颜色: #1890ff
    可点击: 是
    动画: 轻微呼吸效果
  
  completed:   # 已完成（绿色勾 ✓）
    图标: ✓
    颜色: #52c41a
    可点击: 是（可回看/修改）
  
  blocked:     # 阻塞（红色叹号 !）
    图标: !
    颜色: #ff4d4f
    可点击: 是
    提示: 悬浮显示阻塞原因

  iterating:   # 迭代中（橙色循环 ↻）
    图标: ↻
    颜色: #fa8c16
    可点击: 是
    显示: 当前迭代次数 (2/3)
```

### 2.3 阶段列表

```yaml
标准流程阶段:
  1. 创作者特质 (CreatorProfile)
     - 可在项目开始前设置
     - 全程可随时调整
  
  2. 意图分析 (Intent)
     - 明确内容目标和成功标准
     - 必须完成才能进入下一步
  
  3. 消费者调研 (ConsumerResearch)
     - 可跳过（使用AI推断）
     - 可直接粘贴已有调研
  
  4. 内涵生产 (ContentCore) ← 这是核心内容的完整生产！
     - 4.1 方案设计：生成多个方案，用户选择
     - 4.2 内容生产：按FieldSchema逐个生产完整内容
           例如课程：完整的课程脚本、PPT大纲、练习题、案例等
     - 4.3 内容评估：Simulator评估，自迭代优化
     - 可能包含多个子阶段，每个子阶段对应FieldSchema的一个字段
  
  5. 外延生产 (ContentExtension) ← 内涵完成后才开始！
     - 基于已完成的内涵，生产营销和触达内容
     - 例如：课程介绍页、小红书宣传文、邮件序列
     - 可添加多个渠道，每个渠道独立生产
  
  6. 评估报告 (Report)
     - 自动生成
     - 包含流程报告 + 质量报告
```

**关键区分**：
```yaml
内涵（ContentCore）:
  定义: 核心内容的完整生产
  产出: 可交付的完整素材（课程脚本、文章全文、产品说明等）
  特点: 这是"产品本身"

外延（ContentExtension）:
  定义: 内涵完成后的营销触达
  产出: 介绍页、宣传文案、推广邮件
  特点: 这是"卖产品的内容"
  前提: 内涵必须全部完成
```

### 2.4 进度栏交互

```yaml
点击阶段:
  - 跳转到该阶段的编辑区
  - 保持对话区上下文（或加载该阶段的对话历史）

悬浮阶段:
  - 显示该阶段的简要状态
  - 完成的阶段：显示完成时间
  - 阻塞的阶段：显示阻塞原因

右键阶段:
  - 重做此阶段
  - 查看阶段历史
  - 导出阶段产出
```

---

## 三、中间编辑区

### 3.1 功能定位

```yaml
核心职责:
  - 展示当前阶段的产出内容
  - 支持用户编辑/修改
  - 展示AI生成的多个方案供选择
  - 展示Simulator的评估反馈
```

### 3.2 不同阶段的编辑区

#### 意图分析阶段

```
┌─────────────────────────────────────────────────────────────┐
│  意图分析                                        [重新分析]  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  目标                                                        │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 让目标用户看完介绍页后立即报名课程                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  成功标准                                                    │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ • 转化率 > 5%                                        │   │
│  │ • 用户停留时间 > 3分钟                                │   │
│  │ + 添加标准                                           │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  约束条件                                                    │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 必须包含：讲师背景、课程大纲                           │   │
│  │ 必须避免：价格对比、负面案例                           │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│                              [确认并进入下一步]              │
└─────────────────────────────────────────────────────────────┘
```

#### 消费者调研阶段

```
┌─────────────────────────────────────────────────────────────┐
│  消费者调研                                                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ [AI生成] [直接粘贴] [混合模式]                        │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  如果选择"直接粘贴"：                                        │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                     │   │
│  │  [粘贴你的调研资料、用户访谈、竞品分析...]           │   │
│  │                                                     │   │
│  │                                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  如果选择"AI生成"，显示生成的结构化画像：                     │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 用户画像：职场3-5年的中层管理者...                    │   │
│  │ 痛点：团队管理无从下手...                            │   │
│  │ 目标：成为高效的管理者...                            │   │
│  │                                           [可编辑]   │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 内涵生产阶段

**内涵生产包含多个子阶段**：

##### 4.1 方案设计（选择整体方向）

```
┌─────────────────────────────────────────────────────────────┐
│  内涵生产 > 方案设计                                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐│
│  │    方案 A       │ │    方案 B       │ │    方案 C       ││
│  │   (稳妥型)      │ │   (创意型)      │ │   (激进型)      ││
│  ├─────────────────┤ ├─────────────────┤ ├─────────────────┤│
│  │ 整体思路：      │ │ 整体思路：      │ │ 整体思路：      ││
│  │ 从痛点切入...   │ │ 从故事切入...   │ │ 从争议切入...   ││
│  │                 │ │                 │ │                 ││
│  │ [查看详情]      │ │ [查看详情]      │ │ [查看详情]      ││
│  │    [选择]       │ │    [选择]       │ │    [选择]       ││
│  └─────────────────┘ └─────────────────┘ └─────────────────┘│
│                                                             │
│  💡 AI推荐：方案A（最符合转化目标）                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

##### 4.2 内容生产（按FieldSchema逐项生产）

```
┌─────────────────────────────────────────────────────────────┐
│  内涵生产 > 内容生产                           进度: 3/8     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─ 左侧：字段列表 ─────────────────────────────────────┐   │
│  │                                                     │   │
│  │  ✓ 1. 课程目标                                      │   │
│  │  ✓ 2. 学员画像                                      │   │
│  │  → 3. 课程大纲 (当前)                               │   │
│  │  ○ 4. 第一节脚本                                    │   │
│  │  ○ 5. 第二节脚本                                    │   │
│  │  ○ 6. 练习题设计                                    │   │
│  │  ○ 7. 案例素材                                      │   │
│  │  ○ 8. 总结与行动项                                  │   │
│  │                                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─ 右侧：当前字段内容 ────────────────────────────────┐   │
│  │                                                     │   │
│  │  字段：课程大纲                                      │   │
│  │  说明：列出所有章节的标题和核心要点                   │   │
│  │                                                     │   │
│  │  ┌─────────────────────────────────────────────┐   │   │
│  │  │ 第一章：理解团队管理的本质                    │   │   │
│  │  │   - 管理 vs 领导的区别                       │   │   │
│  │  │   - 新手管理者的常见误区                     │   │   │
│  │  │                                             │   │   │
│  │  │ 第二章：建立信任的三个关键动作               │   │   │
│  │  │   - 倾听：不是等对方说完                     │   │   │
│  │  │   - 反馈：具体而非抽象                       │   │   │
│  │  │   ...                                       │   │   │
│  │  │                              [可直接编辑]   │   │   │
│  │  └─────────────────────────────────────────────┘   │   │
│  │                                                     │   │
│  │  Simulator评估：8/10 ✓                              │   │
│  │  [重新生成] [接受并继续下一项]                       │   │
│  │                                                     │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

##### 4.3 整体评估（所有字段完成后）

```
┌─────────────────────────────────────────────────────────────┐
│  内涵生产 > 整体评估                                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ✅ 所有内容字段已生产完成                                   │
│                                                             │
│  ┌─ 整体质量评估 ─────────────────────────────────────┐    │
│  │                                                     │    │
│  │  课程目标    ████████░░  8/10                       │    │
│  │  学员画像    █████████░  9/10                       │    │
│  │  课程大纲    ████████░░  8/10                       │    │
│  │  第一节脚本  ███████░░░  7/10 ⚠️ 建议优化           │    │
│  │  ...                                               │    │
│  │                                                     │    │
│  │  整体评分：8.2/10                                   │    │
│  │                                                     │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  [查看完整内容] [导出所有素材] [进入外延生产]                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 外延生产阶段（可随时开始）

**时机**：只要用户愿意，随时可以开始外延生产。
- **早期**：内涵未完成时，基于意图和价值点生成初版
- **后期**：内涵完成后，基于完整素材生成精确版
- **迭代**：内涵更新后，可重新生成外延以保持一致

**目的**：基于可用的上下文，生产营销和触达内容。

```
┌─────────────────────────────────────────────────────────────┐
│  外延生产                                                    │
│  📦 基于内涵：[查看已完成的课程素材]                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  营销渠道：[课程介绍页 ✓] [小红书 ○] [邮件序列 ○] [+ 添加]    │
│                                                             │
│  ─────────────────────────────────────────────────────────  │
│                                                             │
│  课程介绍页                                   [重新生成]     │
│  说明：将课程核心卖点转化为招生落地页                        │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                     │   │
│  │  # 标题：3周掌握团队管理核心技能                     │   │
│  │                                                     │   │
│  │  ## 你将学到                                        │   │
│  │  （自动提取自内涵中的课程目标）                      │   │
│  │                                                     │   │
│  │  ## 课程大纲                                        │   │
│  │  （自动提取自内涵中的课程大纲）                      │   │
│  │                                                     │   │
│  │  ...                                               │   │
│  │                               （用户可直接编辑）    │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ─────────────────────────────────────────────────────────  │
│                                                             │
│  Simulator评估                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ ✓ 评分：8/10                                        │   │
│  │ 优点：开头有吸引力，痛点描述到位                      │   │
│  │ 问题：CTA部分紧迫感不足                              │   │
│  │                                                     │   │
│  │ [接受] [让AI修改] [手动修改]                        │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 四、右侧对话区

### 4.1 功能定位

```yaml
核心职责:
  - 与AI进行自然语言对话
  - 提供上下文相关的交互
  - 展示AI的追问、建议、解释
  - 对话结果同步到中间编辑区
```

### 4.2 对话区布局

```
┌─────────────────────────────────────┐
│  对话                    [清空] [↗] │  # ↗ 表示可展开为全屏
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🤖 AI                        │   │
│  │ 好的，让我帮你分析一下意图。 │   │
│  │ 请问这个介绍页最重要的目标   │   │
│  │ 是什么？                     │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 👤 你                        │   │
│  │ 希望看完就报名，高转化       │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🤖 AI                        │   │
│  │ 明白，目标是高转化。再确认：  │   │
│  │ 1. 有必须提到的内容吗？      │   │
│  │ 2. 有不能提的内容吗？        │   │
│  │                              │   │
│  │ [快捷回复: 没有特别要求]     │   │
│  └─────────────────────────────┘   │
│                                     │
│  ...                                │
│                                     │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐   │
│  │ 输入消息...              [→] │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

### 4.3 对话与编辑区的联动

```yaml
联动规则:
  1. AI在对话中生成结构化内容时，自动同步到编辑区
  2. 用户在编辑区修改内容时，对话区显示"已手动修改"
  3. 用户可以在对话中说"帮我改一下开头"，AI修改后同步到编辑区
  4. 每个阶段保留独立的对话历史
  
快捷操作:
  - 在编辑区选中文字 → 右键 → "在对话中讨论这段"
  - 在对话区点击AI建议 → 自动应用到编辑区
```

### 4.4 上下文引用机制

**核心设计**：用户可以用 `@` 语法引用已有内容，类似Notion AI。

```yaml
引用语法:
  阶段级:
    @意图分析          # 引用意图分析的完整产出
    @消费者调研        # 引用消费者调研的完整产出
    @内涵生产          # 引用内涵的所有已完成字段
  
  字段级:
    @内涵.课程目标     # 引用内涵中的特定字段
    @内涵.课程大纲
    @外延.介绍页
  
  特殊引用:
    @创作者特质        # 只引用创作者特质
    @用户画像          # 只引用目标用户信息
```

**对话区引用UI**：

```
┌─────────────────────────────────────────┐
│  对话                                    │
├─────────────────────────────────────────┤
│                                         │
│  🤖 AI: 好的，我来帮你写介绍页。         │
│                                         │
│  ─────────────────────────────────────  │
│  💡 可引用的上下文：                      │
│  ┌─────────────────────────────────┐   │
│  │ @意图分析 ✓ (点击引用)           │   │
│  │ @消费者调研 ✓                    │   │
│  │ @内涵.课程目标 ✓                 │   │
│  │ @内涵.课程大纲 ✓                 │   │
│  │ @内涵.第一节脚本 ○ (未完成)      │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 按照 @用户画像 的痛点写...   [→] │   │
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

**自动注入机制**：

```yaml
三层上下文:
  Layer 1 - Golden Context (自动注入，每次必有):
    - 创作者特质（禁忌、范例、自定义字段）
    - 核心意图（目标、成功标准）
    - 目标用户摘要
  
  Layer 2 - 用户显式引用 (@语法):
    - 用户在对话中 @引用 的内容
    - 完整内容注入到提示词
  
  Layer 3 - 系统推荐 (可选接受):
    - 根据任务类型推荐相关引用
    - 用户可以接受或忽略

一致性保障:
  - Golden Context 每次调用都注入
  - 禁忌词自动检查
  - 风格一致性Simulator检查
```

**引用预览**：

```yaml
点击引用标签时:
  - 弹出预览框，显示该引用的内容摘要
  - 用户确认后插入到输入框
  - 可以选择"引用全部"或"引用部分"
```

---

## 五、状态栏

### 5.1 位置和内容

```
┌─────────────────────────────────────────────────────────────────────┐
│  [当前阶段: 内涵设计]  [Simulator: 自动]  [迭代: 2/3]  [保存: ✓]   │
└─────────────────────────────────────────────────────────────────────┘
```

### 5.2 状态项

```yaml
当前阶段:
  - 显示当前所在阶段
  - 点击可快速切换

Simulator状态:
  - 自动：每次生成后自动评估
  - 手动：需要用户触发
  - 关闭：不评估
  - 点击可切换

迭代状态:
  - 显示当前迭代次数 / 最大次数
  - 仅在迭代进行中显示
  - 点击可查看迭代历史

保存状态:
  - ✓：已保存
  - ●：有未保存的修改
  - ↻：正在保存
```

---

## 六、响应式设计

### 6.1 窄屏适配

```yaml
屏幕宽度 < 1200px:
  - 右侧对话区变为可切换的抽屉
  - 点击按钮展开/收起

屏幕宽度 < 900px:
  - 左侧进度栏也变为可切换的抽屉
  - 只保留中间编辑区
  - 顶部增加阶段切换按钮

移动端 (< 600px):
  - 单栏布局
  - 底部Tab切换：进度 | 编辑 | 对话
```

---

## 七、交互模式

### 7.1 键盘快捷键

```yaml
全局:
  Ctrl/Cmd + S: 保存
  Ctrl/Cmd + Enter: 确认当前步骤，进入下一步
  Ctrl/Cmd + /: 聚焦对话输入框
  Esc: 关闭弹窗/抽屉

对话区:
  Enter: 发送消息
  Shift + Enter: 换行
  ↑: 编辑上一条消息

编辑区:
  Ctrl/Cmd + Z: 撤销
  Ctrl/Cmd + Shift + Z: 重做
```

### 7.2 拖拽操作

```yaml
支持的拖拽:
  - 拖拽调整栏位宽度
  - 拖拽方案卡片重新排序
```

---

## 八、配色方案

### 8.1 主色调

```yaml
# 建议采用低对比度、专业感的配色

primary: "#1a73e8"      # 主色，用于强调、按钮
success: "#34a853"      # 成功状态，完成的阶段
warning: "#fbbc05"      # 警告，需要注意
error: "#ea4335"        # 错误，阻塞的阶段
neutral: "#5f6368"      # 中性色，次要文字

background:
  primary: "#ffffff"    # 主背景
  secondary: "#f8f9fa"  # 次级背景（侧边栏）
  tertiary: "#e8eaed"   # 第三级背景（卡片悬浮）

text:
  primary: "#202124"    # 主要文字
  secondary: "#5f6368"  # 次要文字
  disabled: "#9aa0a6"   # 禁用状态
```

### 8.2 深色模式

```yaml
# 可选支持深色模式

background:
  primary: "#1e1e1e"
  secondary: "#252526"
  tertiary: "#2d2d2d"

text:
  primary: "#e8eaed"
  secondary: "#9aa0a6"
```

---

## 九、后台设置界面

**入口**：顶部导航栏 [设置] 按钮

### 9.1 设置界面结构

```
┌─────────────────────────────────────────────────────────────────────┐
│  设置                                                    [×]        │
├────────────────┬────────────────────────────────────────────────────┤
│                │                                                    │
│  ┌──────────┐  │                                                    │
│  │ 项目设置  │  │                                                    │
│  ├──────────┤  │                                                    │
│  │ 创作者   │  │                                                    │
│  │ 特质     │  │          （右侧显示选中分类的详细设置）              │
│  ├──────────┤  │                                                    │
│  │ 字段     │  │                                                    │
│  │ 模板     │  │                                                    │
│  ├──────────┤  │                                                    │
│  │ 系统     │  │                                                    │
│  │ 提示词   │  │                                                    │
│  ├──────────┤  │                                                    │
│  │ 评估器   │  │                                                    │
│  │ 配置     │  │                                                    │
│  ├──────────┤  │                                                    │
│  │ 渠道     │  │                                                    │
│  │ 管理     │  │                                                    │
│  ├──────────┤  │                                                    │
│  │ 数据     │  │                                                    │
│  │ 管理     │  │                                                    │
│  └──────────┘  │                                                    │
│                │                                                    │
└────────────────┴────────────────────────────────────────────────────┘
```

### 9.2 项目设置

```
┌─────────────────────────────────────────────────────────────────────┐
│  项目设置                                                           │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  项目名称                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 团队管理课程                                                 │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  项目描述                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 面向新晋管理者的团队管理入门课程                              │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  使用的字段模板                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ [课程模板 v2] ▼                                [修改模板]    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  关联的创作者特质                                                   │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ [老王的风格] ▼                                 [修改特质]    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ─────────────────────────────────────────────────────────────────  │
│                                                                     │
│  [保存] [重置]                                                      │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 9.3 创作者特质管理

```
┌─────────────────────────────────────────────────────────────────────┐
│  创作者特质                                      [+ 新建特质]       │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  已保存的特质                                                       │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ ► 老王的风格（当前使用）                         [编辑] [删]  │   │
│  │ ► 正式商务风格                                  [编辑] [删]  │   │
│  │ ► 轻松口语风格                                  [编辑] [删]  │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ─────────────────────────────────────────────────────────────────  │
│                                                                     │
│  编辑：老王的风格                                                   │
│                                                                     │
│  禁忌词汇                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 躺赚, 割韭菜, 暴富                               [+ 添加]    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  禁碰话题                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 政治, 宗教                                       [+ 添加]    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  范例文本（用于风格模仿）                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 说白了就是，很多人学东西学不会，不是因为笨，               │   │
│  │ 是因为他们总想一步到位。                                    │   │
│  │                                                             │   │
│  │ 你品，你细品：小时候学骑车...                               │   │
│  │                                              [+ 添加范例]    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  自定义字段                                         [+ 添加字段]    │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 调性: 口语化、略带自嘲                              [编辑]   │   │
│  │ 写作节奏: 短句为主，每段不超过3行                   [编辑]   │   │
│  │ 偏好结构: 先抛结论，再讲为什么                      [编辑]   │   │
│  │ 口头禅: 说白了就是、你品你细品                      [编辑]   │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  [保存]                                                             │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 9.4 字段模板管理

```
┌─────────────────────────────────────────────────────────────────────┐
│  字段模板                                        [+ 新建模板]       │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  已保存的模板                                                       │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ ► 课程模板 v2（当前使用）                       [编辑] [复制]  │
│  │ ► 营销长文案模板                               [编辑] [复制]  │
│  │ ► 产品说明书模板                               [编辑] [复制]  │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ─────────────────────────────────────────────────────────────────  │
│                                                                     │
│  编辑：课程模板 v2                                                  │
│                                                                     │
│  模板描述                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 适用于线上课程的完整素材生产                                 │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  字段列表                                           [+ 添加字段]    │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                             │   │
│  │  ┌─────────────────────────────────────────────────────┐   │   │
│  │  │ 1. 课程目标                              [↑] [↓] [×]  │   │   │
│  │  │    说明: 学完后学员能做到什么                        │   │   │
│  │  │    类型: text                                        │   │   │
│  │  │    必填: 是                                          │   │   │
│  │  │    AI提示: 用"能+动词+具体成果"格式                  │   │   │
│  │  └─────────────────────────────────────────────────────┘   │   │
│  │                                                             │   │
│  │  ┌─────────────────────────────────────────────────────┐   │   │
│  │  │ 2. 课程大纲                              [↑] [↓] [×]  │   │   │
│  │  │    说明: 所有章节的标题和核心要点                    │   │   │
│  │  │    类型: list                                        │   │   │
│  │  │    必填: 是                                          │   │   │
│  │  │    AI提示: 每章3-5个要点                             │   │   │
│  │  └─────────────────────────────────────────────────────┘   │   │
│  │                                                             │   │
│  │  ... (更多字段)                                             │   │
│  │                                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  [保存] [预览]                                                      │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 9.5 系统提示词管理

```
┌─────────────────────────────────────────────────────────────────────┐
│  系统提示词                                                         │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  提示词分类                                                         │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ [意图分析] [消费者调研] [内涵生产] [外延生产] [评估器]       │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ─────────────────────────────────────────────────────────────────  │
│                                                                     │
│  内涵生产 > 内容生成提示词                                          │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 你正在为以下创作者生产内容：                                │   │
│  │ {creator_profile}                                           │   │
│  │                                                             │   │
│  │ 目标用户：                                                  │   │
│  │ {consumer_research}                                         │   │
│  │                                                             │   │
│  │ 当前要生产的字段：                                          │   │
│  │ 名称：{field_name}                                          │   │
│  │ 说明：{field_description}                                   │   │
│  │ 提示：{field_ai_hint}                                       │   │
│  │                                                             │   │
│  │ 请生成该字段的内容。                                        │   │
│  │                                                             │   │
│  │                                                 [可编辑]    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  可用变量：                                                         │
│  {creator_profile} {consumer_research} {intent}                     │
│  {field_name} {field_description} {field_ai_hint}                   │
│  {previous_fields} {iteration_feedback}                             │
│                                                                     │
│  [保存] [重置为默认] [测试运行]                                     │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 9.6 评估器（Simulator）配置

```
┌─────────────────────────────────────────────────────────────────────┐
│  评估器配置                                      [+ 新建评估器]     │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  已保存的评估器                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ ► 目标读者视角（当前使用）                      [编辑] [删]   │   │
│  │ ► 转化效果评估                                 [编辑] [删]   │   │
│  │ ► 风格一致性检查                               [编辑] [删]   │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ─────────────────────────────────────────────────────────────────  │
│                                                                     │
│  编辑：目标读者视角                                                 │
│                                                                     │
│  评估提示词                                                         │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 你是我的目标读者：                                          │   │
│  │ {consumer_research}                                         │   │
│  │                                                             │   │
│  │ 读完以下内容后回答：                                        │   │
│  │ 1. 读完后你想采取什么行动？                                 │   │
│  │ 2. 哪里让你觉得"这不对"或"不适合我"？                       │   │
│  │ 3. 整体打分（1-10），一句话说为什么。                       │   │
│  │                                                             │   │
│  │ 【内容】                                                    │   │
│  │ {content}                                                   │   │
│  │                                                             │   │
│  │                                                 [可编辑]    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  自动迭代配置                                                       │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ ☑ 启用自动迭代                                              │   │
│  │                                                             │   │
│  │ 触发条件：评分低于 [6] 分                                   │   │
│  │ 停止条件：评分高于 [8] 分 或 迭代次数达到 [3] 次            │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  [保存] [测试运行]                                                  │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 9.7 渠道管理（外延生产用）

```
┌─────────────────────────────────────────────────────────────────────┐
│  渠道管理                                        [+ 新建渠道]       │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  已配置的渠道                                                       │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ ► 课程介绍页                                    [编辑] [删]   │   │
│  │ ► 小红书                                        [编辑] [删]   │   │
│  │ ► 邮件序列                                      [编辑] [删]   │   │
│  │ ► 公众号文章                                    [编辑] [删]   │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ─────────────────────────────────────────────────────────────────  │
│                                                                     │
│  编辑：小红书                                                       │
│                                                                     │
│  渠道描述                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 生成适合小红书平台的短图文内容                               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  格式约束                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 标题字数: 最多20字                                          │   │
│  │ 正文字数: 500-1000字                                        │   │
│  │ 标题格式: emoji开头                                         │   │
│  │ 结尾要求: 必须有互动引导                                    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  生成提示词                                                         │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 基于以下核心内容，生成小红书风格的宣传文案：                 │   │
│  │ {content_core_summary}                                      │   │
│  │ ...                                                         │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  [保存]                                                             │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 9.8 数据管理

```
┌─────────────────────────────────────────────────────────────────────┐
│  数据管理                                                           │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  项目数据                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                             │   │
│  │  存储位置：本地数据库                                       │   │
│  │  数据大小：12.3 MB                                          │   │
│  │  最后保存：2026-02-01 14:32:15                              │   │
│  │                                                             │   │
│  │  [导出项目] [导入项目] [清空项目数据]                       │   │
│  │                                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  内容文件                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                             │   │
│  │  📄 课程目标.md                     12KB    [查看] [导出]   │   │
│  │  📄 课程大纲.md                     8KB     [查看] [导出]   │   │
│  │  📄 第一节脚本.md                   45KB    [查看] [导出]   │   │
│  │  📄 第二节脚本.md                   38KB    [查看] [导出]   │   │
│  │  ...                                                        │   │
│  │                                                             │   │
│  │  [导出全部为ZIP]                                            │   │
│  │                                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  对话历史                                                           │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                             │   │
│  │  共 156 条对话记录                                          │   │
│  │                                                             │   │
│  │  [查看完整历史] [导出对话] [清空对话历史]                   │   │
│  │                                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 十、本地数据存储方案

### 10.1 存储架构

```yaml
存储层: 本地数据库 (IndexedDB 或 SQLite via Tauri)

选型建议:
  Web应用: IndexedDB（浏览器原生，无需后端）
  桌面应用: SQLite via Tauri（更强大，支持复杂查询）
  
数据同步:
  - 前端修改 → 自动保存到本地db
  - 支持导出为JSON/ZIP
  - 未来可选：云端同步
```

### 10.2 数据模型

```yaml
# 本地存储的数据结构

projects:
  - id: string
    name: string
    description: string
    creator_profile_id: string
    field_schema_id: string
    created_at: timestamp
    updated_at: timestamp
    status: string

creator_profiles:
  - id: string
    name: string
    taboos: object
    example_texts: array
    custom_fields: object

field_schemas:
  - id: string
    name: string
    description: string
    fields: array

project_contents:  # 每个项目的实际内容
  - project_id: string
    stage: string          # "intent" | "research" | "core" | "extension"
    field_name: string     # 对应FieldSchema中的字段
    content: text          # 实际内容
    version: number        # 版本号（用于迭代历史）
    evaluation: object     # Simulator评估结果
    created_at: timestamp

prompts:  # 系统提示词
  - id: string
    category: string       # "intent" | "research" | "core" | "extension" | "simulator"
    name: string
    content: text
    is_default: boolean

channels:  # 外延渠道配置
  - id: string
    name: string
    description: string
    constraints: object
    prompt: text

conversation_history:  # 对话历史
  - project_id: string
    stage: string
    messages: array
    created_at: timestamp
```

### 10.3 前端存储接口

```typescript
// 存储服务接口定义
interface StorageService {
  // 项目
  getProjects(): Promise<Project[]>;
  getProject(id: string): Promise<Project>;
  saveProject(project: Project): Promise<void>;
  deleteProject(id: string): Promise<void>;
  
  // 内容
  getContent(projectId: string, stage: string, fieldName: string): Promise<Content>;
  saveContent(content: Content): Promise<void>;
  getContentHistory(projectId: string, fieldName: string): Promise<Content[]>;
  
  // 配置
  getCreatorProfiles(): Promise<CreatorProfile[]>;
  saveCreatorProfile(profile: CreatorProfile): Promise<void>;
  getFieldSchemas(): Promise<FieldSchema[]>;
  saveFieldSchema(schema: FieldSchema): Promise<void>;
  
  // 导入导出
  exportProject(projectId: string): Promise<Blob>;
  importProject(file: File): Promise<Project>;
}
```

### 10.4 自动保存策略

```yaml
保存触发条件:
  - 用户编辑内容后停止输入 2 秒
  - 切换阶段时
  - 关闭页面前（beforeunload）
  - 每 30 秒定时保存

保存状态提示:
  - 状态栏显示保存状态
  - ✓：已保存
  - ●：有未保存的修改
  - ↻：正在保存
  
冲突处理:
  - 本地优先（单机应用，无冲突）
  - 保留历史版本，可回滚
```

